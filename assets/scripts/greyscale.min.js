"use strict";

(function () {
  var image = document.querySelector("#sunset");
  var canvas = document.querySelector("#myCanvas");
  canvas.width = image.width;
  canvas.height = image.height;
  var ctx = canvas.getContext("2d");
  ctx.drawImage(image, 0, 0);
  var imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
  greyScale(imageData);
  ctx.putImageData(imageData, 0, 0);

  function greyScale(imageData) {
    var d = imageData.data;

    for (var i = 0; i < d.length; i += 4) {
      var r = d[i];
      var g = d[i + 1];
      var b = d[i + 2]; // CIE luminance for the RGB
      // The human eye is bad at seeing red and blue, so we de-emphasize them.

      var v = 0.2126 * r + 0.7152 * g + 0.0722 * b;
      d[i] = d[i + 1] = d[i + 2] = v;
    }

    return imageData;
  }

  ;
})();