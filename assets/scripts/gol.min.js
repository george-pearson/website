"use strict";$(document).ready(function(){var d=1,o=0,a=i(200,200,o),h=3,e=document.querySelector("#myCanvas");e.width=a.length*h,e.height=a[0].length*h;var t,f=e.getContext("2d"),g=document.querySelector("#color1"),v=document.querySelector("#color2");function n(){u(a=function(e){for(var t=i(e.length,e[0].length,o),n=0;n<e.length;n++)for(var r=0;r<e[0].length;r++)e[n][r]===d?c(e,n,r)<2?t[n][r]=o:2===c(e,n,r)||3===c(e,n,r)?t[n][r]=d:3<c(e,n,r)&&(t[n][r]=o):a[n][r]===o&&3===c(e,n,r)&&(t[n][r]=d);return t}(a)),t=window.requestAnimationFrame(n)}function r(e){for(var t=Math.round(e.length/2),n=Math.round(e[0].length/2),r=[[0,0],[-3,-1],[-2,-1],[-2,1],[1,-1],[2,-1],[3,-1]],o=0;o<r.length;o++){var a=r[o][0],c=r[o][1];e[t+a][n+c]=d}}function c(e,t,n){for(var r=[[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1],[0,-1],[1,-1]],o=0,a=0;a<8;a++){var c=r[a][0],u=r[a][1];e[l(t+c,e.length)][l(n+u,e[t].length)]===d&&o++}return o}function l(e,t){return t<=e&&(e-=t),e<0&&(e+=t),e}function u(e){for(var t=f.getImageData(0,0,e.length*h,e[0].length*h),n=s(g.value),r=s(v.value),o=0;o<e.length;o++)for(var a=0;a<e[0].length;a++)for(var c=e[o][a]===d,u=0;u<h;u++)for(var l=0;l<h;l++){var i=4*(o*h+u+(a*h+l)*e.length*h);t.data[i+0]=c?n.r:r.r,t.data[i+1]=c?n.g:r.g,t.data[i+2]=c?n.b:r.b,t.data[i+3]=255}f.putImageData(t,0,0)}function s(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function i(e,t,n){for(var r=[],o=0;o<e;o++)r[o]=[];for(o=0;o<e;o++)for(var a=0;a<t;a++)r[o][a]=n;return r}r(a),u(a),$("#stop").hide(),document.querySelector("#start").addEventListener("click",function(){t||(t=window.requestAnimationFrame(n),$("#start").hide(),$("#stop").show())}),document.querySelector("#stop").addEventListener("click",function(){window.cancelAnimationFrame(t),t=void 0,$("#start").show(),$("#stop").hide()}),document.querySelector("#acorn").addEventListener("click",function(){r(a=i(a.length,a[0].length,o)),u(a)}),document.querySelector("#cross").addEventListener("click",function(){(function(e){for(var t=e.length,n=e[0].length,r=0;r<t;r++){var o=r;0<=o&&o<n&&(e[r][o]=d)}for(var r=t-1;0<=r;r--){var o=n-(r+1);0<=o&&o<n&&(e[r][o]=d)}})(a=i(a.length,a[0].length,o)),u(a)}),document.querySelector("#color1").addEventListener("change",function(){u(a)}),document.querySelector("#color2").addEventListener("change",function(){u(a)})});