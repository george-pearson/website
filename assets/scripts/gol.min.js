"use strict";!function(){var u=1,a=0,n=w(200,200,a),d=3,e=document.querySelector("#myCanvas");e.width=n.length*d,e.height=n[0].length*d;var t,f=e.getContext("2d"),g=f.getImageData(0,0,e.width,e.height),h=g.data,s=document.querySelector("#color1"),v=document.querySelector("#color2"),r=document.querySelector("#stop"),o=document.querySelector("#start"),c=[[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1],[0,-1],[1,-1]];function i(){p(n=function(n){for(var e=function(n){return n.map(function(n){return n.slice(0)})}(n),t=0;t<n.length;t++)for(var r=0;r<n[0].length;r++){var o=y(n,t,r);n[t][r]===u?o<2?e[t][r]=a:2===o||3===o?e[t][r]=u:3<o&&(e[t][r]=a):n[t][r]===a&&3===o&&(e[t][r]=u)}return e}(n)),t=window.requestAnimationFrame(i)}function l(n){for(var e=Math.round(n.length/2),t=Math.round(n[0].length/2),r=[[0,0],[-3,-1],[-2,-1],[-2,1],[1,-1],[2,-1],[3,-1]],o=0;o<r.length;o++){var a=r[o][0],i=r[o][1];n[e+a][t+i]=u}}function y(n,e,t){for(var r=0,o=0;o<c.length;o++){var a=c[o][0],i=c[o][1];n[m(e+a,n.length)][m(t+i,n[e].length)]===u&&r++}return r}function m(n,e){return e<=n&&(n-=e),n<0&&(n+=e),n}function p(n){for(var e=q(s.value),t=q(v.value),r=0;r<n.length;r++)for(var o=0;o<n[0].length;o++)for(var a=n[r][o]===u,i=0;i<d;i++)for(var c=0;c<d;c++){var l=4*(r*d+i+(o*d+c)*n.length*d);h[0+l]=a?e.r:t.r,h[1+l]=a?e.g:t.g,h[2+l]=a?e.b:t.b,h[3+l]=255}f.putImageData(g,0,0)}function q(n){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}function w(n,e,t){for(var r=[],o=0;o<n;o++)r[o]=[];for(o=0;o<n;o++)for(var a=0;a<e;a++)r[o][a]=t;return r}l(n),p(n),r.style.display="none",o.addEventListener("click",function(){t||(t=window.requestAnimationFrame(i),o.style.display="none",r.style.display="inline")}),r.addEventListener("click",function(){window.cancelAnimationFrame(t),t=void 0,o.style.display="inline",r.style.display="none"}),document.querySelector("#acorn").addEventListener("click",function(){l(n=w(n.length,n[0].length,a)),p(n)}),document.querySelector("#cross").addEventListener("click",function(){(function(n){for(var e=n.length,t=n[0].length,r=0;r<e;r++){0<=(o=r)&&o<t&&(n[r][o]=u)}for(r=e-1;0<=r;r--){var o;0<=(o=t-(r+1))&&o<t&&(n[r][o]=u)}})(n=w(n.length,n[0].length,a)),p(n)}),s.addEventListener("change",function(){p(n)}),v.addEventListener("change",function(){p(n)})}();