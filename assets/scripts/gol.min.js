"use strict";$(document).ready(function(){var d=1,c=0,e=q(200,200,c),l=3,t=document.querySelector("#myCanvas");t.width=e.length*l,t.height=e[0].length*l;var n,f=t.getContext("2d"),h=f.getImageData(0,0,t.width,t.height),v=document.querySelector("#color1"),g=document.querySelector("#color2"),u=[[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1],[0,-1],[1,-1]];function r(){a(e=function(e){for(var t=(a=e,a.map(function(e){return e.slice(0)})),n=0;n<e.length;n++)for(var r=0;r<e[0].length;r++){var o=i(e,n,r);e[n][r]===d?o<2?t[n][r]=c:2===o||3===o?t[n][r]=d:3<o&&(t[n][r]=c):e[n][r]===c&&3===o&&(t[n][r]=d)}var a;return t}(e)),n=window.requestAnimationFrame(r)}function o(e){for(var t=Math.round(e.length/2),n=Math.round(e[0].length/2),r=[[0,0],[-3,-1],[-2,-1],[-2,1],[1,-1],[2,-1],[3,-1]],o=0;o<r.length;o++){var a=r[o][0],c=r[o][1];e[t+a][n+c]=d}}function i(e,t,n){for(var r=0,o=0;o<8;o++){var a=u[o][0],c=u[o][1];e[s(t+a,e.length)][s(n+c,e[t].length)]===d&&r++}return r}function s(e,t){return t<=e&&(e-=t),e<0&&(e+=t),e}function a(e){for(var t=m(v.value),n=m(g.value),r=0;r<e.length;r++)for(var o=0;o<e[0].length;o++)for(var a=e[r][o]===d,c=0;c<l;c++)for(var u=0;u<l;u++){var i=4*(r*l+c+(o*l+u)*e.length*l);h.data[i+0]=a?t.r:n.r,h.data[i+1]=a?t.g:n.g,h.data[i+2]=a?t.b:n.b,h.data[i+3]=255}f.putImageData(h,0,0)}function m(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function q(e,t,n){for(var r=[],o=0;o<e;o++)r[o]=[];for(o=0;o<e;o++)for(var a=0;a<t;a++)r[o][a]=n;return r}o(e),a(e),$("#stop").hide(),document.querySelector("#start").addEventListener("click",function(){n||(n=window.requestAnimationFrame(r),$("#start").hide(),$("#stop").show())}),document.querySelector("#stop").addEventListener("click",function(){window.cancelAnimationFrame(n),n=void 0,$("#start").show(),$("#stop").hide()}),document.querySelector("#acorn").addEventListener("click",function(){o(e=q(e.length,e[0].length,c)),a(e)}),document.querySelector("#cross").addEventListener("click",function(){(function(e){for(var t=e.length,n=e[0].length,r=0;r<t;r++){var o=r;0<=o&&o<n&&(e[r][o]=d)}for(var r=t-1;0<=r;r--){var o=n-(r+1);0<=o&&o<n&&(e[r][o]=d)}})(e=q(e.length,e[0].length,c)),a(e)}),document.querySelector("#color1").addEventListener("change",function(){a(e)}),document.querySelector("#color2").addEventListener("change",function(){a(e)})});