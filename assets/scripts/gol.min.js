"use strict";!function(){var u=1,i=0,n=w(200,200,i),d=3,e=document.querySelector("#myCanvas");e.width=n.length*d,e.height=n[0].length*d;var t,f=e.getContext("2d"),v=f.getImageData(0,0,e.width,e.height),g=v.data,h=document.querySelector("#color1"),s=document.querySelector("#color2"),r=document.querySelector("#stop"),a=document.querySelector("#start"),c=[[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1],[0,-1],[1,-1]];function o(){p(n=function(n){for(var e=(o=n,o.map(function(n){return n.slice(0)})),t=0;t<n.length;t++)for(var r=0;r<n[0].length;r++){var a=y(n,t,r);n[t][r]===u?a<2?e[t][r]=i:2===a||3===a?e[t][r]=u:3<a&&(e[t][r]=i):n[t][r]===i&&3===a&&(e[t][r]=u)}var o;return e}(n)),t=window.requestAnimationFrame(o)}function l(n){for(var e=Math.round(n.length/2),t=Math.round(n[0].length/2),r=[[0,0],[-3,-1],[-2,-1],[-2,1],[1,-1],[2,-1],[3,-1]],a=0;a<r.length;a++){var o=r[a][0],i=r[a][1];n[e+o][t+i]=u}}function y(n,e,t){for(var r=0,a=0;a<c.length;a++){var o=c[a][0],i=c[a][1];n[m(e+o,n.length)][m(t+i,n[e].length)]===u&&r++}return r}function m(n,e){return e<=n&&(n-=e),n<0&&(n+=e),n}function p(n){for(var e=q(h.value),t=q(s.value),r=0;r<n.length;r++)for(var a=0;a<n[0].length;a++)for(var o=n[r][a]===u,i=0;i<d;i++)for(var c=0;c<d;c++){var l=4*(r*d+i+(a*d+c)*n.length*d);g[l+0]=o?e.r:t.r,g[l+1]=o?e.g:t.g,g[l+2]=o?e.b:t.b,g[l+3]=255}f.putImageData(v,0,0)}function q(n){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}function w(n,e,t){for(var r=[],a=0;a<n;a++)r[a]=[];for(a=0;a<n;a++)for(var o=0;o<e;o++)r[a][o]=t;return r}l(n),p(n),r.style.display="none",a.addEventListener("click",function(){t||(t=window.requestAnimationFrame(o),a.style.display="none",r.style.display="inline")}),r.addEventListener("click",function(){window.cancelAnimationFrame(t),t=void 0,a.style.display="inline",r.style.display="none"}),document.querySelector("#acorn").addEventListener("click",function(){l(n=w(n.length,n[0].length,i)),p(n)}),document.querySelector("#cross").addEventListener("click",function(){(function(n){for(var e=n.length,t=n[0].length,r=0;r<e;r++){var a=r;0<=a&&a<t&&(n[r][a]=u)}for(var r=e-1;0<=r;r--){var a=t-(r+1);0<=a&&a<t&&(n[r][a]=u)}})(n=w(n.length,n[0].length,i)),p(n)}),h.addEventListener("change",function(){p(n)}),s.addEventListener("change",function(){p(n)})}();