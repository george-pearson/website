"use strict";$(document).ready(function(){var d=1,a=0,c=q(200,200,a),l=3,e=document.querySelector("#myCanvas");e.width=c.length*l,e.height=c[0].length*l;var t,h=e.getContext("2d"),f=h.getImageData(0,0,e.width,e.height),g=document.querySelector("#color1"),v=document.querySelector("#color2"),u=[[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1],[0,-1],[1,-1]];function n(){o(c=function(e){for(var t=q(e.length,e[0].length,a),n=0;n<e.length;n++)for(var r=0;r<e[0].length;r++){var o=i(e,n,r);e[n][r]===d?o<2?t[n][r]=a:2===o||3===o?t[n][r]=d:3<o&&(t[n][r]=a):c[n][r]===a&&3===o&&(t[n][r]=d)}return t}(c)),t=window.requestAnimationFrame(n)}function r(e){for(var t=Math.round(e.length/2),n=Math.round(e[0].length/2),r=[[0,0],[-3,-1],[-2,-1],[-2,1],[1,-1],[2,-1],[3,-1]],o=0;o<r.length;o++){var a=r[o][0],c=r[o][1];e[t+a][n+c]=d}}function i(e,t,n){for(var r=0,o=0;o<8;o++){var a=u[o][0],c=u[o][1];e[s(t+a,e.length)][s(n+c,e[t].length)]===d&&r++}return r}function s(e,t){return t<=e&&(e-=t),e<0&&(e+=t),e}function o(e){for(var t=m(g.value),n=m(v.value),r=0;r<e.length;r++)for(var o=0;o<e[0].length;o++)for(var a=e[r][o]===d,c=0;c<l;c++)for(var u=0;u<l;u++){var i=4*(r*l+c+(o*l+u)*e.length*l);f.data[i+0]=a?t.r:n.r,f.data[i+1]=a?t.g:n.g,f.data[i+2]=a?t.b:n.b,f.data[i+3]=255}h.putImageData(f,0,0)}function m(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function q(e,t,n){for(var r=[],o=0;o<e;o++)r[o]=[];for(o=0;o<e;o++)for(var a=0;a<t;a++)r[o][a]=n;return r}r(c),o(c),$("#stop").hide(),document.querySelector("#start").addEventListener("click",function(){t||(t=window.requestAnimationFrame(n),$("#start").hide(),$("#stop").show())}),document.querySelector("#stop").addEventListener("click",function(){window.cancelAnimationFrame(t),t=void 0,$("#start").show(),$("#stop").hide()}),document.querySelector("#acorn").addEventListener("click",function(){r(c=q(c.length,c[0].length,a)),o(c)}),document.querySelector("#cross").addEventListener("click",function(){(function(e){for(var t=e.length,n=e[0].length,r=0;r<t;r++){var o=r;0<=o&&o<n&&(e[r][o]=d)}for(var r=t-1;0<=r;r--){var o=n-(r+1);0<=o&&o<n&&(e[r][o]=d)}})(c=q(c.length,c[0].length,a)),o(c)}),document.querySelector("#color1").addEventListener("change",function(){o(c)}),document.querySelector("#color2").addEventListener("change",function(){o(c)})});