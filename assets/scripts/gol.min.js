"use strict";$(document).ready(function(){var d=1,c=0,u=a(200,200,c),l=3,e=document.querySelector("#myCanvas");e.width=u.length*l,e.height=u[0].length*l;var t,f=e.getContext("2d"),h=f.getImageData(0,0,e.width,e.height),v=document.querySelector("#color1"),g=document.querySelector("#color2"),i=[[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1],[0,-1],[1,-1]];function n(){o(u=function(e){for(var t=(a=e,a.map(function(e){return e.slice(0)})),n=0;n<e.length;n++)for(var r=0;r<e[0].length;r++){var o=s(e,n,r);e[n][r]===d?o<2?t[n][r]=c:2===o||3===o?t[n][r]=d:3<o&&(t[n][r]=c):u[n][r]===c&&3===o&&(t[n][r]=d)}var a;return t}(u)),t=window.requestAnimationFrame(n)}function r(e){for(var t=Math.round(e.length/2),n=Math.round(e[0].length/2),r=[[0,0],[-3,-1],[-2,-1],[-2,1],[1,-1],[2,-1],[3,-1]],o=0;o<r.length;o++){var a=r[o][0],c=r[o][1];e[t+a][n+c]=d}}function s(e,t,n){for(var r=0,o=0;o<8;o++){var a=i[o][0],c=i[o][1];e[m(t+a,e.length)][m(n+c,e[t].length)]===d&&r++}return r}function m(e,t){return t<=e&&(e-=t),e<0&&(e+=t),e}function o(e){for(var t=q(v.value),n=q(g.value),r=0;r<e.length;r++)for(var o=0;o<e[0].length;o++)for(var a=e[r][o]===d,c=0;c<l;c++)for(var u=0;u<l;u++){var i=4*(r*l+c+(o*l+u)*e.length*l);h.data[i+0]=a?t.r:n.r,h.data[i+1]=a?t.g:n.g,h.data[i+2]=a?t.b:n.b,h.data[i+3]=255}f.putImageData(h,0,0)}function q(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function a(e,t,n){for(var r=[],o=0;o<e;o++)r[o]=[];for(o=0;o<e;o++)for(var a=0;a<t;a++)r[o][a]=n;return r}r(u),o(u),$("#stop").hide(),document.querySelector("#start").addEventListener("click",function(){t||(t=window.requestAnimationFrame(n),$("#start").hide(),$("#stop").show())}),document.querySelector("#stop").addEventListener("click",function(){window.cancelAnimationFrame(t),t=void 0,$("#start").show(),$("#stop").hide()}),document.querySelector("#acorn").addEventListener("click",function(){r(u=a(u.length,u[0].length,c)),o(u)}),document.querySelector("#cross").addEventListener("click",function(){(function(e){for(var t=e.length,n=e[0].length,r=0;r<t;r++){var o=r;0<=o&&o<n&&(e[r][o]=d)}for(var r=t-1;0<=r;r--){var o=n-(r+1);0<=o&&o<n&&(e[r][o]=d)}})(u=a(u.length,u[0].length,c)),o(u)}),document.querySelector("#color1").addEventListener("change",function(){o(u)}),document.querySelector("#color2").addEventListener("change",function(){o(u)})});