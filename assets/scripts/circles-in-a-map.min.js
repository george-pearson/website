"use strict";!function(){var u=document.querySelector("#uk_and_ireland_small"),c=document.querySelector("#myCanvas"),t=document.querySelector("#btnRun"),o=c.getContext("2d"),s=document.querySelector("#colour1"),m=document.querySelector("#colour2"),v=document.querySelector("#colour3"),b=document.querySelector("#colour4"),g=document.querySelector("#rmin"),a=document.querySelector("#rminValueDisplay");a.innerHTML=g.value,g.addEventListener("change",function(e){a.innerHTML=g.value});var y=document.querySelector("#rmax"),r=document.querySelector("#rmaxValueDisplay");function L(e){e?(t.innerHTML="Run",t.disabled=!1,g.disabled=!1,y.disabled=!1,s.disabled=!1,m.disabled=!1,v.disabled=!1,b.disabled=!1,u.style.display="none",c.style.display="block"):(t.innerHTML="Working on it...",t.disabled=!0,g.disabled=!0,y.disabled=!0,s.disabled=!0,m.disabled=!0,v.disabled=!0,b.disabled=!0)}r.innerHTML=y.value,y.addEventListener("change",function(e){r.innerHTML=y.value}),t.addEventListener("click",function(){L(!1);var i=Math.round(u.naturalWidth),d=Math.round(u.naturalHeight);c.width=i,c.height=d,o.drawImage(u,0,0,i,d);var e=o.getImageData(0,0,i,d).data,t=[s.value,m.value,v.value,b.value],a=parseFloat(g.value),r=parseFloat(y.value),n=new Worker("/assets/scripts/circles-in-a-map.worker.min.js");n.addEventListener("message",function(e){var t=function(e,t,a){var r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("width",t),r.setAttribute("height",a);for(var n=0;n<e.length;n++){var l=document.createElementNS(r.namespaceURI,"circle");l.setAttribute("cx",e[n].cx),l.setAttribute("cy",e[n].cy),l.setAttribute("r",e[n].r),l.setAttribute("fill",e[n].colour),r.appendChild(l)}return r}(e.data[0],i,d);o.clearRect(0,0,i,d);var a=(new XMLSerializer).serializeToString(t),r=new Blob([a],{type:"image/svg+xml;charset=utf-8"}),n=URL.createObjectURL(r),l=new Image;l.onload=function(){o.drawImage(l,0,0),URL.revokeObjectURL(n),L(!0)},l.src=n},!1);var l={imageData:e,circleColours:t,rmin:a,rmax:r,n:800,LX:i,LY:d};n.postMessage([l])})}();